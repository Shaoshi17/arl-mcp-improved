# ARL MCP Improved v2.0

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![MCP](https://img.shields.io/badge/MCP-1.0.0-green.svg)](https://github.com/modelcontextprotocol)

**ä¸“ä¸ºAIå®‰å…¨åˆ†æè®¾è®¡çš„ARL MCPæœåŠ¡å™¨ï¼Œæä¾›48ä¸ªå·¥å…·ï¼Œè¦†ç›–æ¼æ´æ‰«æã€æ•æ„Ÿä¿¡æ¯æ³„éœ²æ£€æµ‹ã€GitHubä»£ç æ³„éœ²ç›‘æ§ç­‰åŠŸèƒ½ã€‚**

æ”¹è¿›ç‰ˆçš„ ARL (Asset Reconnaissance Lighthouse) MCP æœåŠ¡å™¨ï¼Œæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œæä¾›å®Œæ•´çš„ ARL API é›†æˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ”’ å®‰å…¨æ£€æµ‹ï¼ˆ19ä¸ªå·¥å…·ï¼‰
- **Nucleiæ¼æ´æ‰«æ** - è¯¦ç»†çš„æ¼æ´ä¿¡æ¯å’ŒåŒ¹é…å†…å®¹
- **POCç®¡ç†** - æ¼æ´éªŒè¯è„šæœ¬ç®¡ç†
- **æ•æ„Ÿä¿¡æ¯æ³„éœ²æ£€æµ‹** - é…ç½®æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ã€æ•°æ®åº“æ³„éœ²
- **GitHubä»£ç æ³„éœ²ç›‘æ§** - ç›‘æ§GitHubä¸Šçš„æ•æ„Ÿä¿¡æ¯
- **WebæŒ‡çº¹è¯†åˆ«** - è‡ªå®šä¹‰æŒ‡çº¹è§„åˆ™
- **SSLè¯ä¹¦æŸ¥è¯¢** - è¯ä¹¦è¿‡æœŸå’Œå®‰å…¨æ£€æŸ¥

### ğŸ¤– AIåˆ†æä¸“ç”¨ï¼ˆ3ä¸ªå·¥å…·ï¼‰
- **æ¼æ´æ±‡æ€»åˆ†æ** - ä¸€é”®è·å–æ‰€æœ‰æ¼æ´ç»Ÿè®¡
- **æ•æ„Ÿä¿¡æ¯æ³„éœ²æ±‡æ€»** - é«˜é£é™©æ³„éœ²è¯†åˆ«
- **GitHubæ³„éœ²æ±‡æ€»** - ä»£ç æ³„éœ²é£é™©è¯„ä¼°

### ğŸš€ è‡ªåŠ¨åŒ–åŠŸèƒ½
- **ç›‘æ§ä»»åŠ¡** - å®šæœŸè‡ªåŠ¨æ‰«æ
- **ç­–ç•¥ç®¡ç†** - è‡ªå®šä¹‰æ‰«æé…ç½®
- **æ•°æ®å¯¼å‡º** - CSVæ ¼å¼å¯¼å‡º

### ğŸ› ï¸ åŸºç¡€åŠŸèƒ½
- ğŸ”§ **çµæ´»é…ç½®** - æ”¯æŒç¯å¢ƒå˜é‡é…ç½® ARL URL å’Œ Token
- ğŸŒ **åŒè¯­æ”¯æŒ** - è‡ªåŠ¨æ£€æµ‹å¹¶æ”¯æŒä¸­è‹±æ–‡å“åº”
- ğŸ“Š **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡ä»»åŠ¡ç®¡ç†å’Œæ•°æ®å¯¼å‡º
- ğŸ” **é«˜çº§æœç´¢** - æ”¯æŒå¤šæ¡ä»¶è¿‡æ»¤å’Œç²¾ç¡®æŸ¥è¯¢
- ğŸš€ **æ˜“äºé›†æˆ** - ä¸ Kiro IDE å’Œå…¶ä»– MCP å®¢æˆ·ç«¯æ— ç¼é›†æˆ

## ğŸ“Š å·¥å…·ç»Ÿè®¡

- **æ€»è®¡ï¼š48ä¸ªå·¥å…·**
- åŸºç¡€å·¥å…·ï¼š3ä¸ª
- ä»»åŠ¡ç®¡ç†ï¼š8ä¸ª
- èµ„äº§æŸ¥è¯¢ï¼š12ä¸ª
- æ¼æ´æ‰«æï¼š5ä¸ª
- GitHubç›‘æ§ï¼š4ä¸ª
- æŒ‡çº¹è¯†åˆ«ï¼š3ä¸ª
- ç­–ç•¥ç®¡ç†ï¼š3ä¸ª
- ç›‘æ§ä»»åŠ¡ï¼š3ä¸ª
- æ•°æ®å¯¼å‡ºï¼š3ä¸ª
- AIåˆ†æï¼š3ä¸ª
- **APIè¦†ç›–ç‡ï¼š45%**

## ğŸš€ å¿«é€Ÿå¼€å§‹

### AIå®‰å…¨è¯„ä¼°ï¼ˆ3æ­¥å®Œæˆï¼‰

```python
# 1. è·å–æ¼æ´æ¦‚å†µ
vuln_summary = get_vulnerability_summary()

# 2. è·å–æ•æ„Ÿä¿¡æ¯æ³„éœ²æ¦‚å†µ
leak_summary = get_sensitive_leak_summary()

# 3. è·å–GitHubä»£ç æ³„éœ²æ¦‚å†µ
github_summary = get_github_leak_summary()

# AIåˆ†æå¹¶ç”ŸæˆæŠ¥å‘Š
```

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- Python 3.10+
- ARL æœåŠ¡å™¨ï¼ˆè¿è¡Œä¸­ï¼‰
- ARL API Token

### ä½¿ç”¨ uvxï¼ˆæ¨èï¼‰

```bash
# åœ¨ MCP é…ç½®ä¸­æ·»åŠ 
{
  "mcpServers": {
    "arl": {
      "command": "uvx",
      "args": ["--from", ".", "arl-mcp-improved"],
      "env": {
        "ARL_URL": "https://127.0.0.1:5192",
        "ARL_TOKEN": "your_token_here"
      }
    }
  }
}
```

### ä½¿ç”¨ pip

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd arl-mcp-improved

# å®‰è£…ä¾èµ–
pip install -e .

# è®¾ç½®ç¯å¢ƒå˜é‡
export ARL_URL="https://127.0.0.1:5192"
export ARL_TOKEN="your_token_here"

# è¿è¡ŒæœåŠ¡å™¨
python server.py
```

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `ARL_URL` | ARL æœåŠ¡å™¨åœ°å€ | `https://127.0.0.1:5192` | å¦ |
| `ARL_TOKEN` | ARL API Token | - | æ˜¯ |

### è·å– ARL Token

1. ç™»å½• ARL Web ç•Œé¢
2. è¿›å…¥ "ç”¨æˆ·è®¾ç½®" æˆ– "API è®¾ç½®"
3. ç”Ÿæˆæˆ–å¤åˆ¶ API Token
4. å°† Token é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­

## ğŸ“š æ–‡æ¡£

### å¿«é€Ÿå¯¼èˆª
- ğŸ“– [å®Œæ•´å·¥å…·åˆ—è¡¨](./TOOLS.md) - 58ä¸ªå·¥å…·çš„è¯¦ç»†è¯´æ˜
- ğŸ”’ [å®‰å…¨æ£€æµ‹å·¥å…·](./SECURITY_TOOLS.md) - 19ä¸ªå®‰å…¨ç›¸å…³å·¥å…·
- ğŸ¤– [AIä½¿ç”¨æŒ‡å—](./AI_USAGE_GUIDE.md) - AIå®‰å…¨åˆ†æå®Œæ•´æŒ‡å—
- ğŸ“‹ [ç¼ºå¤±APIåˆ†æ](./MISSING_APIS.md) - æœªæ¥æ‰©å±•è®¡åˆ’
- âš™ï¸ [é…ç½®æŒ‡å—](./CONFIG_GUIDE.md) - è¯¦ç»†é…ç½®è¯´æ˜
- ğŸ”„ [æ›´æ–°æ—¥å¿—](./CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°è®°å½•

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ‰«æä»»åŠ¡

```python
result = add_scan_task_and_prompt(
    name="æµ‹è¯•æ‰«æ",
    target="example.com",
    domain_brute=True,
    port_scan=True,
    file_leak=True
)
```

### æŸ¥è¯¢æ¼æ´

```python
# æŸ¥è¯¢æ‰€æœ‰ä¸¥é‡æ¼æ´
critical_vulns = search_nuclei_result_detail(
    severity="critical",
    size=100
)

# è·å–æ¼æ´æ±‡æ€»ï¼ˆAIåˆ†æä¸“ç”¨ï¼‰
summary = get_vulnerability_summary()
```

### æ£€æµ‹æ•æ„Ÿä¿¡æ¯æ³„éœ²

```python
# æŸ¥è¯¢æ–‡ä»¶æ³„éœ²
leaks = search_fileleak_detail(size=1000)

# è·å–æ³„éœ²æ±‡æ€»ï¼ˆAIåˆ†æä¸“ç”¨ï¼‰
leak_summary = get_sensitive_leak_summary()
```

### ç›‘æ§GitHubä»£ç æ³„éœ²

```python
# åˆ›å»ºç›‘æ§ä»»åŠ¡
create_github_monitor(
    name="example.comç›‘æ§",
    keywords="example.com api_key password secret",
    cron="0 */6 * * *"
)

# æŸ¥è¯¢æ³„éœ²ç»“æœ
results = search_github_results(keyword="example.com")

# è·å–æ³„éœ²æ±‡æ€»ï¼ˆAIåˆ†æä¸“ç”¨ï¼‰
github_summary = get_github_leak_summary()
```

### è®¾ç½®æŒç»­ç›‘æ§

```python
# åˆ›å»ºå®šæœŸæ‰«æä»»åŠ¡
create_scheduler(
    name="æ¯æ—¥å®‰å…¨æ‰«æ",
    target="example.com",
    cron="0 2 * * *"  # æ¯å¤©å‡Œæ™¨2ç‚¹
)
```

## ğŸ¯ AIåˆ†æåœºæ™¯

### åœºæ™¯1ï¼šå…¨é¢å®‰å…¨è¯„ä¼°
```python
# ä¸€é”®è·å–å®Œæ•´å®‰å…¨çŠ¶å†µ
vuln_summary = get_vulnerability_summary()
leak_summary = get_sensitive_leak_summary()
github_summary = get_github_leak_summary()

# AIç”Ÿæˆç»¼åˆæŠ¥å‘Š
```

### åœºæ™¯2ï¼šæ¼æ´æ·±åº¦åˆ†æ
```python
# æŸ¥è¯¢é«˜å±æ¼æ´
critical = search_nuclei_result_detail(severity="critical")
high = search_nuclei_result_detail(severity="high")

# AIåˆ†æå¹¶ç”Ÿæˆä¿®å¤æ–¹æ¡ˆ
```

### åœºæ™¯3ï¼šæ•æ„Ÿä¿¡æ¯æ³„éœ²è°ƒæŸ¥
```python
# æŸ¥è¯¢æ‰€æœ‰æ³„éœ²
leaks = search_fileleak_detail(size=1000)

# AIè¯†åˆ«é«˜é£é™©æ³„éœ²å¹¶ç”Ÿæˆåº”æ€¥å“åº”è®¡åˆ’
```

## ğŸ” æ ¸å¿ƒå·¥å…·åˆ†ç±»

### ä»»åŠ¡ç®¡ç†ï¼ˆ8ä¸ªï¼‰
- `add_scan_task_and_prompt` - åˆ›å»ºæ‰«æä»»åŠ¡
- `add_scan_task_with_policy` - ä½¿ç”¨ç­–ç•¥åˆ›å»ºä»»åŠ¡
- `list_all_tasks` - åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
- `query_task_status` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
- `get_task_detail` - è·å–ä»»åŠ¡è¯¦æƒ…
- `query_and_extract` - æå–ä»»åŠ¡ç»“æœ
- `delete_task` - åˆ é™¤ä»»åŠ¡
- `stop_task` - åœæ­¢ä»»åŠ¡
- `export_task_data` - å¯¼å‡ºä»»åŠ¡æ•°æ®

### èµ„äº§æŸ¥è¯¢ï¼ˆ11ä¸ªï¼‰
- `get_all_subdomains` - è·å–å­åŸŸå
- `query_ip_list` - è·å–IPåˆ—è¡¨
- `query_site_list` - è·å–ç«™ç‚¹åˆ—è¡¨
- `query_fileleak_list` - è·å–æ–‡ä»¶æ³„éœ²åˆ—è¡¨
- `search_asset_domain` - æœç´¢åŸŸåèµ„äº§
- `search_asset_ip` - æœç´¢IPèµ„äº§
- `search_site` - æœç´¢ç«™ç‚¹
- `search_cert` - æœç´¢SSLè¯ä¹¦
- `search_url` - æœç´¢URL
- `search_fileleak_detail` - æœç´¢æ–‡ä»¶æ³„éœ²è¯¦æƒ…

### å®‰å…¨æ‰«æï¼ˆ19ä¸ªï¼‰
- `search_nuclei_result_detail` - Nucleiæ¼æ´æ‰«æ
- `list_poc` - åˆ—å‡ºPOC
- `sync_poc` - åŒæ­¥POCåº“
- `delete_poc` - åˆ é™¤POC
- `create_github_monitor` - åˆ›å»ºGitHubç›‘æ§
- `list_github_monitors` - åˆ—å‡ºGitHubç›‘æ§
- `search_github_results` - æœç´¢GitHubæ³„éœ²
- `delete_github_monitor` - åˆ é™¤GitHubç›‘æ§
- `list_fingerprints` - åˆ—å‡ºæŒ‡çº¹
- `add_fingerprint` - æ·»åŠ æŒ‡çº¹
- `delete_fingerprint` - åˆ é™¤æŒ‡çº¹
- `get_vulnerability_summary` - æ¼æ´æ±‡æ€»ï¼ˆAIä¸“ç”¨ï¼‰
- `get_sensitive_leak_summary` - æ³„éœ²æ±‡æ€»ï¼ˆAIä¸“ç”¨ï¼‰
- `get_github_leak_summary` - GitHubæ³„éœ²æ±‡æ€»ï¼ˆAIä¸“ç”¨ï¼‰

### è‡ªåŠ¨åŒ–ï¼ˆ6ä¸ªï¼‰
- `create_scheduler` - åˆ›å»ºç›‘æ§ä»»åŠ¡
- `list_schedulers` - åˆ—å‡ºç›‘æ§ä»»åŠ¡
- `delete_scheduler` - åˆ é™¤ç›‘æ§ä»»åŠ¡
- `create_policy` - åˆ›å»ºç­–ç•¥
- `list_policies` - åˆ—å‡ºç­–ç•¥
- `delete_policy` - åˆ é™¤ç­–ç•¥

### æ•°æ®å¯¼å‡ºï¼ˆ3ä¸ªï¼‰
- `export_domain_csv` - å¯¼å‡ºåŸŸå
- `export_ip_csv` - å¯¼å‡ºIP
- `export_site_csv` - å¯¼å‡ºç«™ç‚¹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [ARL é¡¹ç›®](https://github.com/TophantTechnology/ARL)
- [MCP åè®®](https://github.com/modelcontextprotocol)
- [FastMCP](https://github.com/jlowin/fastmcp)

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [AIä½¿ç”¨æŒ‡å—](./AI_USAGE_GUIDE.md)
2. æŸ¥çœ‹ [é…ç½®æŒ‡å—](./CONFIG_GUIDE.md)
3. æäº¤ Issue

---

**v2.0 æ›´æ–°äº®ç‚¹ï¼š**
- âœ¨ æ–°å¢33ä¸ªå·¥å…·ï¼ˆä»25ä¸ªå¢åŠ åˆ°58ä¸ªï¼‰
- ğŸ”’ å®Œæ•´çš„å®‰å…¨æ£€æµ‹åŠŸèƒ½
- ğŸ¤– 3ä¸ªAIåˆ†æä¸“ç”¨å·¥å…·
- ğŸ“Š APIè¦†ç›–ç‡ä»22%æå‡åˆ°51%
- ğŸ“š å®Œæ•´çš„AIä½¿ç”¨æŒ‡å—
